<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Amigo Secreto</title>
</head>
<body>

<div>
    <h1>Amigo Secreto</h1>
    <input type="text" id="nameInput" placeholder="Digite seu nome">
    <button onclick="submitName()">Enviar</button>
</div>

<div>
    <h2>Participantes</h2>
    <table id="participantsTable">
        <tr>
            <th>Nome</th>
            <th>Data e Hora</th>
        </tr>
        <!-- Os participantes serÃ£o inseridos aqui -->
    </table>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

 const firebaseConfig = {
  apiKey: "AIzaSyDXOqm52mwBr4RH3KuP5MrGeyYg1qQy27M",
  authDomain: "amigo-secreto-8b3ae.firebaseapp.com",
  databaseURL: "https://amigo-secreto-8b3ae-default-rtdb.firebaseio.com",
  projectId: "amigo-secreto-8b3ae",
  storageBucket: "amigo-secreto-8b3ae.appspot.com",
  messagingSenderId: "133611460498",
  appId: "1:133611460498:web:2641aafc8c318aaa4d134b"
};


  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  window.submitName = function() {
      const nameInput = document.getElementById('nameInput');
      const name = nameInput.value;
      const dateTime = new Date().toISOString();

      push(ref(database, 'participants'), {
          nome: name,
          data_hora: dateTime
      });
  }

  onValue(ref(database, 'participants'), (snapshot) => {
      const participantsTable = document.getElementById('participantsTable');
      
      participantsTable.innerHTML = `
          <tr>
              <th>Nome</th>
              <th>Data e Hora</th>
          </tr>
      `;
      
      snapshot.forEach((childSnapshot) => {
          const childData = childSnapshot.val();
          const row = participantsTable.insertRow(-1);
          const cellName = row.insertCell(0);
          const cellDate = row.insertCell(1);
          
          cellName.textContent = childData.nome;
          cellDate.textContent = childData.data_hora;
      });
  });
</script>

</body>
</html>
